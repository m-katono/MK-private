<!DOCTYPE html>
<html lang="ja" dir="ltr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="./css/master.css" type="text/css">
        <title>MK-private</title>
    </head>
    <body>
<!--  浮いてるメニュー  -->
<div class="top_menu">
        <a href="#top" class="pagenum">top</a>-<a href="./index.html#menu" class="pagenum">menu</a>
</div>

        <div class="top" id="top">

		<p><iframe width="400" height="30" frameborder="0"></iframe></p>

            <h1><a href="https://shangyuanyezhengju.wixsite.com/mkpage" target="_blank" rel="noopener"><img src="./photo/icon.jpg" alt="" width="40px" height="40px"></a><a href="https://m-katono.mydns.jp">MK-private</a></h1>
            <div class="menu"><h2>Page 4</h2>
            Page-<a href="./index.html#menu" class="pagenum">menu</a>-<a href="./index.html" class="pagenum">1</a>-<a href="./second-page.html" class=pagenum>2</a>-<a href="./third-page.html" class="pagenum">3</a>-4-<a href="./fifth-page.html" class="pagenum">5</a>-
            <p>
                　htmlタグをスマホで書くのがめんどくさいので、MarkDown記法を使ってみることにする。
            </p>
            </div>
<!--cssを修正してみる-->
                <div class="menu" id="i16">
                    <h3>cssを修正してみる</h3>08/Feb/2020
                    <p>
                        　今まではサイト内へのリンクをクリックしたときにsmooth scrollする動きを<strong>jQuery</strong>で実装していた。htmlファイル内でjQueryを読み込んで、スクロールの動きも別ファイルで作成して読み込んでいた。新しいページを作るたびに両方読み込むので、ヘッダーの記述が毎回長くなって面倒くさかった。
                    </p>
                    <p>
                        　他の方法をネットで調べていたら、最近は<strong>css</strong>だけで実装できることが書いてあった。しかもたったの1行追加するだけ。もちろん、複雑な動きを作るにはjavascriptを使うのがいいが、それでも昔よりずっと少ないコードで実現できるみたい。自分の場合は飽きないよつにちょっと動きを付けたいだけなのでcssで十分。
                    </p>
                    <pre class="coding-env"><code>
/* cssのコード */
html{
    scroll-behavior: smooth;
}
</code></pre>
                    <p>
                        たったこれだけでよくあるページ内の「#」に飛ぶリンクはsmooth scrollになる。ただMicrosoft IEやApple Safariは対応していないようだが、Microsoft EdgeもChromiumベースになったことだし、今後はみんなが使うだろう。

                    </p>
                    <p>
                        　それと、無計画に記事を書いていたらどんどん目次が長くなってしまったので、cssをイジったついでにメニューの表示を変えた。クリックで展開するようなメニューも最近はjQueryに頼らずにcssで作れるらしいので、早速挑戦した。ここにコードを掲載するにはちょっと長いので、参考にさせていただいたサイトのリンクを貼っておく。<a href="https://saruwakakun.com/html-css/reference/accordion" target="blank" rel="noopener">こちらのサイト</a>を見ながら勉強した。ありがとうございます。
                    </p>
                    <p>
                        　今後はcssでのアニメーションなんかを学んでも面白いのかもしれない。本当はBASIC認証とMySQLを使ったログインシステムで会員サービス的なやつをやってみたいが、サービスの内容が全然思い浮かばない。
                    </p>
                </div>

<!--マークダウンで書いてみる-->
                <div class="menu" id="i17">

                    <h3 id="markdownで書いてみる">MarkDownで書いてみる</h3>
                    <p>09/Feb/2020</p>
                    <p>　<strong>マークダウン記法</strong>というのが便利だというのは以前から聞いたことがあったが、新しい書き方を覚えるのが嫌で無視していた。しかしあまりにもマークダウンを称賛する意見が多いのでしばらく使ってみることにした。</p>
                    <p>　幸い環境は整っていて、MacではAtom、androidではQuickEditでプレビューやシンタックスハイライトができる。あとは文法を覚えるだけだが、そんなに複雑ではなさそう。スマホで文章を書くときにはhtmlのタグがかなり煩わしいが、マークダウンだと普通の文章を書く感覚で作成できるので手軽な感じ。しかもAtomだとhtmlタグやcssのコードを混在させてもいいらしいので、マークダウンだけで表現できない時にはhtmlで書けば良い。</p>
                    <p>　ちなみに、MarkDown記法の書き方で「```」で囲ってコードを書いてコピペするとこんな感じで表示される。</p>
                    <pre class="editor-colors lang-python"><div class="line"><span class="syntax--source syntax--python"><span class="syntax--comment syntax--line">#/usr/bin/Python3</span></span></div><div class="line"><span class="syntax--source syntax--python"><span class="syntax--keyword syntax--control">if</span> __name__ <span class="syntax--keyword syntax--operator">==</span> <span class="syntax--string syntax--quoted">'__main__'</span>:</span></div><div class="line"><span class="syntax--source syntax--python"><span class="leading-whitespace">    </span><span class="syntax--support syntax--function">print</span>(<span class="syntax--string syntax--quoted">"hello world!"</span>)</span></div></pre>
                    <p>あんまり見やすくない。Atom内でのプレビューに使われるシンタックスハイライトの設定も書いてあるので、ソースは実際の表示よりもかなりとても長い。</p>
                    <p>　しばらくはマークダウンで書いてコピペする方法でガンバッテミタイト思う。</p>

                </div>
<!--固定メニューを作る-->
                <div class="menu" id="i18">

                    <h3 id="固定メニューを作る">固定メニューを作る</h3>
<p>11/Feb/2020</p>
<p>　Webサイトを作るにあたって、最近はスマホでの読みやすさを考えて縦長のデザインになる場合が多いように思う。スマホは縦長の画面だし、スクロールが高速だからだろう。ただ、ページの途中で先頭に戻りたくなったり、メニューに戻りたくなったりすることがよくある。そのために所々にページのトップに戻るボタンとメニューに戻るボタンを設置していたが、同じページ内で同じコードを何度も書くことになるのでとっても非効率な気がしていた。</p>
<p>　ということで、ページのスクロールに影響されないように固定のボタンを設置することにした。固定するだけなら簡単で、htmlとcssだけですぐにできる。</p>
<blockquote>
<p>position: fixed;</p>
</blockquote>
<p>これだけで要素を固定できる。htmlの固定したい要素に指定するだけで良い。小さいボタンを二つ設置して背景を透明にしておけば邪魔にならないだろう。</p>
<p><img width="600" alt="scroll" src="./photo/scroll.jpg"></p>

<p>　本当はスクロールに合わせて出現するような動的なボタンを作りたいが、ネットで調べたところやはりjavascriptを使わなければならない。とくにjQueryを使っている例が多いが、どんどん複雑になっていくのでなるべく使いたくない。</p>
<p>何か別の方法がないかと思っていろいろ試したところ、適当なサイズの&lt;iframe&gt;を置くとその分だけ固定した部分もスクロールすることが分かった。ただ、この現象はAndroidスマホのChromeとSleipnirでは確認できたが、PCのブラウザでは出現せずに固定されたままだった。</p>
<pre class="coding-env"><code>
&lt;p>&lt;iframe width="400" height="30" frameborder="0">&lt;/iframe>&lt;/p>
</code></pre>
<p>こんな感じで空っぽの&lt;iframe&gt;を置いておくと、そのheightの分だけ画面上部に設置したボタンも一緒に動くので、スクロールに合わせてボタンを隠すことができた。これでスマホの狭い画面でも多少見やすくなったし、PCではちょっと違う動作をするがPCの画面は広いので問題ない。</p>
                </div>
<!--「送信中」表示する-->
                <div class="menu" id="i19">
                    <h3 id="「送信中」表示する">「送信中」表示する</h3>
            <p>16/Feb/2020</p>
            <p>　この前作った送信フォームの入力チェックには<strong>&lt;input&gt;</strong>の<strong>reqired属性</strong>でやっていた。設定しておくと未入力の際にはポップアップが出るし、<strong>type="email"</strong>とかにすればemailアドレスっぽい文字が入力されたかどうかチェックしてくれる。</p>
            <p>　ただ、正しく入力して送信ボタンを押してからcgiの処理が終わるまでの数秒間が気になる。どうしても「戻る」ボタンを押したり、送信を連打したくなってしまう。他にも次のような問題が考えられる。  </p>
            <ul>
            <li>HTML5に非対応の古いブラウザでは機能しない。</li>
            <li>未入力のチェックはできるが、送信できたかどうかのチェックはできない。</li>
            </ul>
            <p>これを解決するためにcgiの方で入力漏れが無いかチェックしてから送信し、送信できたら完了画面、できなかったらエラー画面に遷移するようにする。また、cgiの処理には少し時間がかかるので画面遷移までの間は「送信中」の表示にする。<br><img alt="送信中" width="600" src="./photo/sending-display.png"></p>
	    <pre class="coding-env">
	    htmlファイル
	    	|
	   送信ボタンを押す  ↓cgiの処理
    -------------------------------------
	        |          &gt;処理完了まで
	    /       \      「送信中」表示
       	    |        |      （元の表示に被せている）
    ------------------------------------
     エラー        完了       &gt;cgiで出力した
                                    htmlを表示する
            </pre>
            <p>　送信中表示はそんなにオシャレにするつもりはないので<strong>jQuery</strong>とかは使わない。htmlの中に「送信中」の要素を書いておいて、初期値は非表示にしておく。<strong>&lt;form&gt;</strong>のボタンの<strong>onclick</strong>イベントからjavascriptの関数を呼び出して、スタイルシートの<strong>display</strong>を<strong>none</strong>から<strong>block</strong>にする。処理が終わるとcgiから出力した画面に切り替わって終了。</p>
            <pre class="coding-env editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"></span></div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text">@javascript "UTF-8"</span></span></div><div class="line"></div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text">function sendingDisplay() {</span></span></div><div class="line"><span class="syntax--text syntax--plain"><span class="leading-whitespace">    </span><span class="syntax--meta syntax--paragraph syntax--text">document.getElementById('sending').style.display='block';</span></span></div><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text">}</span></span></div></pre>
            <p>htmlのコードの中に書いた「送信中」部分のタグのidを<strong>sending</strong>にした場合、javascriptのコードはこんな感じになる。</p>
            <p>どうしてもjQueryを使ったカッコイイアニメーションの例が多い中、今回は<a rel="noopener" href="https://www.officequattro.com/jpn/technet/contents/tnet_17.html" target='_blank'>こちらのサイト</a>を参考にさせていただきました。ありがとうございます。</p>
	    <p><mark>17/Feb/2020 追記</mark><br>
	    　「送信中」画面の表示には成功したが、ブラウザによって多少挙動が違うことが分かった。エラー画面から戻る際は<strong>javascript:history.back()</strong>で入力内容を残して戻り、送信完了画面から戻る際にはトップページへリンクしたのだが、Safariでだけエラー画面から戻ったときに「送信中」画面が表示されたままになってしまう。でもエラー画面から戻ったときには前回入力した内容が残っていて欲しいのでhistory.back()は使いたい。仕方がないので、「送信中」画面に<strong>「送信中」を消す</strong>ボタンを設置して手動で消せるようにした。かっこ悪いけどしばらくはこれで行く。
	    </p>
                </div>
<!--PUPPY Linuxを使ってみる-->
        <div class="menu" id="i20">
            <h3>Puppy Linuxを使ってみる</h3>26/Feb/2020
            <p>
                　使わないUSBメモリが余っていたので、何かOSでもインストールして使ってみようと思った。USBメモリを差し替えていろいろなPCで同じ環境を使えたら便利そう。書き込み速度が速いUSB3.0ならば何とか使用に堪えるだろうと思った。まずは「軽い」とウワサの<strong>Linux Mint Xfce 19.3</strong>をインストールしてみた。Debian系だから使い慣れているし、初めから日本語環境でインストールできる。でも実際に使ってみると場合によっては耐えがたいほど重くなってしまった。<code>sudo apt upgrade</code>をしたら一晩かかってしまった。
                　これでは使いにくいので別のOSを物色していると<strong>Puppy Linux</strong>というのがあった。今回の目的にぴったりの特徴をもっているみたい。
                <ul>
                    <li>最新版の8.0でも容量500MB以下。</li>
                    <li>Ubuntu系。</li>
                    <li>データを全部RAMに読み込んでOSを起動する。</li>
                    <li>必要最低限のソフトは軽量な奴が入っている。</li>
                </ul>
                起動時にメモリに全部データを読み込むのでちょっと時間がかかるが、起動した後はメモリ上で動作するので超高速。シャットダウン時に変更したデータを別ファイルに保存しておく仕組みらしい。重たい作業はできないが、持ち歩き環境にはぴったり。ただ、気に入らないところもいくつかあった。
                <ul>
                    <li>dpkgが使えないのでソフトのインストールがめんどくさい。</li>
                    <li>日本語化が別途必要。（難しくはない）</li>
                </ul>
                　Puppy Linux独自のパッケージマネージャーがあるので、それを利用してVimやPython3.6をインストールした。Puppy Linux向けの<strong>.pep</strong>や<strong>.sfs</strong>のパッケージでいろいろインストールできるし、Debian向けのパッケージもインストールできる。日本語化はネットで<strong>lang_pack_ja-2.1.sfs</strong>をダウンロードしてインストールすると表示できるようになり、Puppyパッケージマネージャーで<strong>scim-anthy_1.2.7-7</strong>をインストールして設定すると入力できるようになる。
            </p>
            <p>
                設定にあったっては次のサイトを参考にさせていただきました。ありがとうございます。<br>
                <a href="http://puppylinux.com/download.html" target="_blank" rel="noopener">Puppy Linux Downloads</a><br>
                <a href="https://pc-freedom.net/basic/puppy-linux-bionicpub-8-0-japanese/" target="_blank" rel="noopener">日本語化</a>
            </p>
            <p>
                <mark>27/Feb/2020　追記</mark><br>
                　古いPCでも動作するように32bitをインストールしたかったが、自分の環境では動作しなかった。OSが立ち上がる寸前まで進むが、デスクトップが立ち上がらずにブラックアウトしてしまう。諦めて64bitをインストールしなおした。
                <ul>
                    <h4>テストした環境</h4>
                    <li>Dell Inspiron 3162</li>
                    <li>Celeron N3060</li>
                    <li>DDR3-4GB</li>
                </ul>
                普段はUbuntu 18.04 LTS をインストールして使っている。Windowsのコマンドプロントには慣れていないので、Puppy Linuxを持ち歩けるととても便利な気がする。
            </p>

            <p><mark>28/Feb/2020　追記</mark><br>
            　今までは<strong>Fullインストール</strong>して使っていたのだが、LegacyモードのないUEFIではうまく起動できなかった。最近のパソコンはUEFIで64bitが普通なのでちょっと不便。なぜFullインストールなのかというと、「Fullだから大は小を兼ねる的な感じで良いだろう」くらいの軽い気持ちだった。たた、よくよく調べると<strong>Frugalインストール</strong>の方が推奨らしいのでFrugalでインストールしなおしてみた。
            </p>
            <p>
            　今回は<a href="https://www.google.com/amp/s/gamp.ameblo.jp/gokurakuhaze/entry-12440408582.html" target="_blank" rel="noopener">こちら</a>を参考にさせていただきました。ありがとうございます。私がインストールしたのは普通の<strong>bioncpup64-8.0</strong>で、PuppyLinux内のツールを利用しただけ。あとはUEFIの「Legacyな設定を読み込む」的な設定をオフにしておけば起動できた。帰ったらMacBookAirでも起動させてみようと思う。
            </p>
            <p>
            　ちなみにファイルシステムをext4にしたら「非推奨」と言われたので「vfat」にした。あと、インストール中に「LegacyなBIOSでも起動できるようにしますか」的な質問が出たので「Yes」にしておいた。
            </p>
        </div>
<!--ここが記事の最後-->
        </div>
    </body>
</html>
